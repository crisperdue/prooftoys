<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
 "http://www.w3.org/TR/html4/loose.dtd">
<!--
  Uses "almost standards mode", standard except for some table cell sizing.
  -->
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Prooftoys - proof builder</title>
  <script src="js/boilerplate.js"></script>

<style type="text/css">
/* CSS here */
</style>

</head>
<body>

<h1>Proof builder</h1>

<div id=slogans>
<!-- slogans here -->
</div>

<span id=leftNav>
<!-- Boilerplate HTML goes here -->
</span>

<span id=content>
<h2>Proof Builder</h2>

<h3>About the Interactive Proof Builder</h3>
<p>
The proof builder lets you interactively build proofs using all of the
publicly-available theorems and rules of inference.  It can make
working with proofs easier, apply rules of inference correctly, show
what inference rules do and how they work.
<p>
Note: <i>Proof displays and the Proof Builder are supported in recent
versions of Firefox and Chrome.</i>

<p style="margin: 0em">
<b>Proof builder</b>
<p>
<div id=proofEditor></div>

</span> <!-- content -->

<!-- Storage for state to preserve across page unloads -->
<textarea id=ToyStore rows=20 cols=80 class=hidden></textarea>
<!-- Force some white space to accommodate the autocompleter menu. -->
<div style="height: 20em"></div>

<!-- END OF HTML -->

<script>
// Insert boilerplate.
Toy.insertNav();
Toy.insertSlogans();

// On DOM ready:
jQuery(function() {
  const fact_arg = Toy.rawQueryParams.fact;
  // Proof editor node
  const options = fact_arg && {docName: 'proofbuilder', loadDoc: false};
  var editor = new Toy.ProofEditor(options);
  window.proofEditor = editor;
  editor.setEditable(true);
  editor.setRulesMode('general');
  $('#proofEditor').append(editor.containerNode);

  const rules = Toy.rules;
  if (fact_arg) {
    // Convert "^" in the query string to '&' to support
    // facts with conjunctions in them.
    const fact = fact_arg.replace(/\^/g, '&');
    // If there is a "fact" query parameter, force the editor to
    // load the fact and ignore any existing "proofbuilder" document.
    // If "details" is also supplied, this forces the editor to
    // load a proof of the fact.
    console.log(fact);
    const result = rules.fact(fact);
    editor.addStep(result);
    const details = Toy.queryParams.details;
    if (details) {
      rules.inline(editor.steps[0].original);
    }
  }
});

</script>
</body>
</html>
